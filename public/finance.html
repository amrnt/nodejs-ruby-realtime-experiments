<html>
<head>
  <title>Realtime Finance</title>
  <style>
    body{
      padding: 40px;
    }
    .stock-block{
      overflow: hidden;
      display: inline-block;
      width: 250px;
      background-color: #ffffee;
      color: #111;
      font-family: tahoma;
      font-size: 18px;
      text-align: center;
      vertical-align: middle;
      margin-right: 10px;
      margin-bottom: 10px;
      border: 1px solid #cccccc;
    }
  </style>
</head>
<body>
  <div id="container"></div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
  <script src="http://0.0.0.0:9000/socket.io/socket.io.js"></script>
  <script type="text/javascript" charset="utf-8">
    var nasdaq100 = io.connect('http://0.0.0.0:9000/nasdaq100');

    nasdaq100.on('connect', function () {
      console.log('connected.');
      nasdaq100.send('NASDAQ:ATVI,NASDAQ:ADBE,NASDAQ:AKAM,NASDAQ:ALXN,NASDAQ:ALTR,NASDAQ:AMZN,NASDAQ:AMGN,NASDAQ:APOL,NASDAQ:AAPL,NASDAQ:AMAT,NASDAQ:ADSK,NASDAQ:ADP,NASDAQ:AVGO,NASDAQ:BIDU,NASDAQ:BBBY,NASDAQ:BIIB,NASDAQ:BMC,NASDAQ:BRCM,NASDAQ:CHRW,NASDAQ:CA,NASDAQ:CELG,NASDAQ:CERN,NASDAQ:CHKP,NASDAQ:CSCO,NASDAQ:CTXS,NASDAQ:CTSH,NASDAQ:CMCSA,NASDAQ:COST,NASDAQ:DELL,NASDAQ:XRAY,NASDAQ:DTV,NASDAQ:DLTR,NASDAQ:EBAY,NASDAQ:EA,NASDAQ:EXPE,NASDAQ:EXPD,NASDAQ:ESRX,NASDAQ:FFIV,NASDAQ:FAST,NASDAQ:FISV,NASDAQ:FLEX,NASDAQ:FOSL,NASDAQ:GRMN,NASDAQ:GILD,NASDAQ:GOOG,NASDAQ:GMCR,NASDAQ:HSIC,NASDAQ:INFY,NASDAQ:INTC,NASDAQ:INTU,NASDAQ:ISRG,NASDAQ:KLAC,NASDAQ:KFT,NASDAQ:LRCX,NASDAQ:LINTA,NASDAQ:LIFE,NASDAQ:LLTC,NASDAQ:MRVL,NASDAQ:MAT,NASDAQ:MXIM,NASDAQ:MCHP,NASDAQ:MU,NASDAQ:MSFT,NASDAQ:MNST,NASDAQ:MYL,NASDAQ:NTAP,NASDAQ:NFLX,NASDAQ:NWSA,NASDAQ:NUAN,NASDAQ:NVDA,NASDAQ:ORLY,NASDAQ:ORCL,NASDAQ:PCAR,NASDAQ:PAYX,NASDAQ:PCLN,NASDAQ:PRGO,NASDAQ:QCOM,NASDAQ:GOLD,NASDAQ:RIMM,NASDAQ:ROST,NASDAQ:SNDK,NASDAQ:STX,NASDAQ:SHLD,NASDAQ:SIAL,NASDAQ:SIRI,NASDAQ:SPLS,NASDAQ:SBUX,NASDAQ:SRCL,NASDAQ:SYMC,NASDAQ:TXN,NASDAQ:VRSN,NASDAQ:VRTX,NASDAQ:VIAB,NASDAQ:VMED,NASDAQ:VOD,NASDAQ:WCRX,NASDAQ:WFM,NASDAQ:WYNN,NASDAQ:XLNX,NASDAQ:YHOO');
    });

    nasdaq100.on('message', function (data) {
      createTable(data);
    });

    nasdaq100.on('disconnect', function () {
      console.log('disconnected');
    });


    var createTable = function(json) {
      data = JSON.parse(json);
      $.each(data, function(i) {
        if($('#' + data[i].e + '_' + data[i].t).length <= 0){
          $('body').append('<div class="stock-block" id="'+ data[i].e + '_' + data[i].t +'"></div>');
        }
        $('#' + data[i].e + '_' + data[i].t).html('<p>' + data[i].e + ':' + data[i].t + '</p>' +
        '<h3>' + data[i].l + '</h3>' +
        '<span style="color:' +
        (data[i].ccol == 'chg' ? '#093' : data[i].ccol == 'chr' ? '#D14836' : '#2E7FF0') +
        ';">' +
        (data[i].ccol == 'chg' ? data[i].c : data[i].ccol == 'chr' ? data[i].c : '0.0') +
        ' (' + (data[i].ccol == 'chg' ? data[i].cp : data[i].ccol == 'chr' ? data[i].cp : '0.0') + '%)'+
        '</span>' +
        '<h6>'+ data[i].lt +'</h6>' +
        '<h6>'+ data[i].l +'</h6>')
      });
    }
  </script>

<!--https://github.com/MikeOnRails/market_beat/blob/master/lib/market_beat/google.yml-->
<!--c: "+5.33"-->
<!--ccol: "chg"-->
<!--cp: "0.80"-->
<!--e: "NASDAQ"-->
<!--id: "694653"-->
<!--l: "672.87"-->
<!--l_cur: "672.87"-->
<!--lt: "Aug 16, 4:00PM EDT"-->
<!--ltt: "4:00PM EDT"-->
<!--s: "0"-->
<!--t: "GOOG"-->

<!--# Real Time-->
<!--:c: :change_real_time-->
<!--:cp: :percent_change_real_time-->
<!--:l: :last_trade_real_time-->
<!--:lt: :last_trade_datetime_real_time-->
<!--:ltt: :last_trade_time_real_time-->
<!--:ccol: :color_code_real_time-->
<!--# :l_cur: :?-->
<!--# :s: :?-->

<!--http://www.google.com/finance/getprices?q=GOOG&x=NASD&i=&f=d,c,v,o,h,l,cp-->
</body>
</html>

